\chapter{Expérimentations}
\label{chap:implementation}

Dans ce chapitre, nous allons présenter des expérimentations visant à appliquer à des cas d'usage concrets les méthodes présentées dans les chapitres précédents.

\section{Du graphe OpenStreetMap à la description exocentrée}

\label{sec:implementation_segmentation}

Cette partie présente une expérimentation visant à décrire textuellement un carrefour depuis \gls{osm}, en concevant la description au sein d'un \gls{sig}. Elle s'appuie, pour le déroulé général, sur le cadre présenté dans le chapitre \ref{chap:description} où les rôles de définition du besoin et de conception technique sont assumés par différents profils d'utilisateurs. Elle s'appuie également sur les modélisations du carrefour présenté en chapitre \ref{chap:modelisation} pour l'acquisition des données.

\subsection{Conception du canevas modulaire}

À l'instar de ce que nous avons présenté au sein du chapitre précédent, la conception du canevas modulaire doit être prise en charge par l'utilisateur final de l'outil. Il doit ainsi préparer la forme des textes souhaités, la forme des données nécessaires, et définir sur cette base les patrons textuels à implémenter (\ref{fig:desc_canevas_modulaire}). Dans le cas de la description de carrefours, cette étape est assumée par l'\gls{ia}, en collaboration avec la ou les personnes qu'il accompagne pour définir des descriptions adaptées à leur besoin.

\subsubsection{Préparation du texte}

Le texte préparé pour cette expérimentation est issu d'échanges avec des personnes liées à la déficience visuelle, notamment des personnes concernées, des \gls{ia}, des architectes urbains et des entreprises de mobilité. L'objectif est ici d'obtenir un aperçu synthétique de la configuration du carrefour: sa forme, ses branches et les manières de le traverser. Pour décrire la forme du carrefour, bien que non-normalisé, un consensus à la fois mobilisés par les urbanistes et usagers existe autour des appelations <<~en croix~>>, <<~en T~>>, etc. \citep{fogliaroni2018}, qui donne à la fois une information sur le nombre de branches et sur la forme générale du carrefour. Pour chaque branche, on détermine le nombre de voies, le type de véhicule qui circule dessus, et les sens de circulation. Enfin, on détermine pour chaque branche s'il existe une traversée, c'est-à-dire la possibilité de passer d'un trottoir à l'autre, et on décrit l'accessibilité des passages piéton qui y sont associés. Par ailleurs, toutes les descriptions ont lieu dans le sens de sens des aiguilles d'une montre en partant de la branche la plus au nord. Le plan de la description est présenté sur la figure \ref{fig:experimentation_plan_description}.

\begin{figure}[ht]
    \begin{minipage}[b]{0.45\linewidth}
        \centering
        \includegraphics[width=0.8\linewidth]{images/experimentation/ortho_carrefour.png} 
    \end{minipage}
    \begin{minipage}[b]{0.45\linewidth}
        \footnotesize
        \textbf{Description générale}\\
        Le carrefour à l'intersection du cours Sablon et de l'avenue Carnot est un carrefour à 4 branches.\\
        \textbf{Description des branches}\\
        (...)\\
        La branche numéro deux qui s'appelle avenue Carnot est composée d'une voie de bus sortante, et une voie de circulation et une voie de bus entrante.\\
        (...)\\
        \textbf{Description des traversées}\\
        (...)\\
        La branche numéro trois se traverse en trois fois. Les passages piétons ne sont pas tous protégés par un feu. Il manque des bandes d'éveil de vigilance ou celles-ci sont dégradées.\\
        (...)
    \end{minipage}
    \caption[Exemple de description de carrefour]{Exemple de description souhaitée pour un carrefour en croix en suivant le plan établi. Source: IGN BD Ortho 2020.}
    \label{fig:experimentation_plan_description}
\end{figure}

\subsubsection{Préparation de la forme des données}

\label{sec:experimentation_forme_donnees}

Pour générer le texte préparé, il faut disposer des données nécessaires à la description du carrefour. Cette partie vise à concevoir des données sous forme tabulaire qui permettent avec un minimum de traitement par la suite de générer les phrases de la description. Elles ne visent donc pas à représenter le carrefour mais plutôt le texte à produire. Les données et leur ordre seront donc au plus proche du texte préparé. La conception du plan est divisée en trois parties pouvant chacune représenter une donnée.

\newpar{}

\textbf{La description générale} présente une vue synthétique du carrefour: nom des branches et type de carrefour. Nous avons choisi d'indiquer le type de carrefour par le nombre de branches car dériver le type de carrefour selon la géométrie des branches peut être difficile sur des carrefours complexes. Une difficulté réside également dans la variabilité du nombre de branches et de leur nom. Afin de normaliser la description de cette information dans une structure facilement manipulable par la suite, nous proposons de stocker les noms de branche au sein d'un unique champ dans le format JSON. La donnée peut alors suivre le schéma tabulaire défini en table \ref{tab:experimentation_desc_generale}.

\newpar{}

\begin{table}[ht]
    \begin{center}
        \footnotesize
        \begin{tabular}{ | l | l |}
            \textbf{Nombre branches} & \textbf{Noms branches}\\
            \hline
            4 & 
            \makecell{
                \texttt[\\
                \hspace{0.5cm}\texttt{\{"type": "avenue","name": "Carnot"\}},\\
                \hspace{0.5cm}\texttt{\{"type": "cours","name": "Sablon"\}}\\
                \texttt]
            }
        \end{tabular}
    \end{center}
    \caption[Schéma tabulaire de la description générale]{Le nom des branches est séparé en type et en nom afin de permettre la liaison lors de la réalisation du texte (voir partie \ref{sec:experimentation_implémentation_patron}). À l'instar du texte, chaque nom de branche n'apparaît qu'une fois.}
    \label{tab:experimentation_desc_generale}
\end{table}

\newpar{}

\textbf{La description des branches} doit indiquer pour chaque branche son numéro et, dans le sens des aiguilles d'une montre, les voies qui le composent. À l'instar des noms de branche, le nombre de voies est également variable. Par ailleurs, il doit être possible de décrire un enchaînement de voies de types et de sens différents. À l'instar de la solution précédente, ces informations seront stockées dans une unique colonne au format JSON. On peut alors définir le schéma tabulaire en table \ref{tab:experimentation_desc_branches}.

\newpar{}

\begin{table}[ht]
    \begin{center}
        \footnotesize
        \begin{tabular}{ | l | l | l |}
            \textbf{N° branche} & \textbf{Nom} & \textbf{Voies}\\
            \hline
            2 & 
            \makecell{
                \texttt{\{}\\
                \hspace{0.5cm}\texttt{\{"type": "avenue"\}},\\
                \hspace{0.5cm}\texttt{\{"name": "Carnot"\}}\\
                \texttt\}
            } &
            \makecell{
                \texttt[\\
                \hspace{0.5cm}\texttt{\{}\\
                \hspace{1cm}\texttt{"direction": "sortant",}\\
                \hspace{1cm}\texttt{"lanes": [}\\
                \hspace{1.5cm}\texttt{\{"number": 1, "type": "bus"\}}\\
                \hspace{1cm}\texttt{]}\\
                \hspace{0.5cm}\texttt{\},\{}\\
                \hspace{1cm}\texttt{"direction": "entrant",}\\
                \hspace{1cm}\texttt{"lanes": [}\\
                \hspace{1.5cm}\texttt{\{"number": 1, "type": "circulation"\},}\\
                \hspace{1.5cm}\texttt{\{"number": 1, "type": "bus"\}}\\
                \hspace{1cm}\texttt{]}\\
                \hspace{0.5cm}\texttt{\}}\\
                \texttt]
            }
        \end{tabular}
    \end{center}
    \caption[Schéma tabulaire de la description des branches]{Le champ Voies décrit l'enchainement des voies de la branche dans le sens des aiguilles d'une montre. Comme dans le texte, les voies sont regroupées par directions et par types contigüs: pour chaque couple de direction et de type, le nombre de voies contigües concernées est indiqué.}
    \label{tab:experimentation_desc_branches}
\end{table}

\newpar{}

\textbf{La description des traversées} affiche une vue synthétique par branche de la traversée quand elle est présente. On ne décrit pas chaque passage piéton mais les caractéristiques générales de la traversées: nombre de passages piétons, présence intégrale, partielle, ou nulle de feux et de pavage tactile. Le schéma tabulaire est présenté en table \ref{tab:experimentation_desc_traversées}.

\newpar{}

\begin{table}[ht]
    \begin{center}
        \footnotesize
        \begin{tabular}{ | l | l | l | l | }
            \textbf{N° branche} & \textbf{Nombre passages piéton} & \textbf{Feux piétons} & \textbf{Pavage tactile}\tabularnewline
            \hline
            3 & 2 & complet & complet
        \end{tabular}
    \end{center}
    \caption[Schéma tabulaire de la description des traversées]{Pour chaque branche, une synthèse des caractéristiques de la traversée est renseignée.}
    \label{tab:experimentation_desc_traversées}
\end{table}

\subsubsection{Préparation des patrons textuels}

\label{sec:experimentation_preparation_patron}

En disposant du texte final et de la forme des données, on peut maintenant définir les patrons textuels de chaque partie. Un patron textuel correspond à un texte conditionnel dont le contenu pourra varier selon les attributs de la donnée décrite. Un exemple de patron applicable à la description générale est présenté par l'algorithme \ref{alg:experimentation_patron_generale}.

\begin{algorithm}
    \SetKwInOut{Input}{entrées}\SetKwInOut{Output}{sortie}
    \Input{NombreBranches: nombre de branches du carrefour\\NomsBranches: liste de noms de branches}
    \Output{Texte}
    \vspace{0.3cm}
    $texte \leftarrow $ \texttt{"Le carrefour à l'intersection de"}\\
    \ForEach{$type$, $nom$ dans $NomsBranches$} {
        $texte \leftarrow texte + type + nom$
    }
    $texte \leftarrow texte +$\texttt{"est un carrefour à"}$+ NombreBranches+$\texttt{"branches".}
    \vspace{0.3cm}
    \caption[Patron textuel de la description générale]{Patron textuel de la description générale}

\label{alg:experimentation_patron_generale}
\end{algorithm}

On remarque que le patron présenté ci-dessus ne correspond pas exactement au texte souhaité. Exécuté avec les données précédentes, le texte obtenu serait <<~Le carrefour à l'intersection avenue Carnot cours Sablon est un carrefour à 4 branches~>>. Il manque en effet les prépositions pour avenue et cours (<<~de l'~>> et <<~du~>>), de même qu'un <<~et~>> entre les deux noms de branche. Cet aspect est adressé dans l'implémentation présentée en partie \ref{sec:experimentation_implémentation_patron}.

\subsection{Intégration du canevas dans un \gls{sig}}

L'intégration du canevas conçu par l'utilisateur est réalisée par un géomaticien ou une personne formée à l'utilisation d'un \gls{sig}. Cette intégration se fait en plusieurs étapes: il faut rechercher les données effectivement disponibles au regard des besoins exprimés, les transformer selon les formes établies par l'utilisateur, puis implémenter les patrons et la génération du texte final dans le \gls{sig}. Pour cette expérimentation, les traitements ont été réalisés sous QGIS. Des développements spécifiques en Python pour le traitement des données \gls{osm} liées au carrefour et pour la génération de texte ont été réalisé et sont présentés dans les parties suivantes.

\subsubsection{Acquisition des données}

Le texte préparé implique d'avoir accès à des données liées à la voirie à la fois des points de vue motorisé (nombre de voies) et piéton (trottoirs, passages piéton, signalisation), mais également à des informations sur l'accessibilité des équipements (\gls{bev}, signaux sonores). Comme évoqué dans le chapitre \ref{chap:etat_art}, ces informations sont accessibles au sein de bases de données éparses réalisées par les collectivités gestionnaires de la voirie et des équipements. Elles peuvent effectivement être utilisées, mais à condition de contraindre la réalisation des descriptions au territoire sur lesquelles elles sont disponibles. En revanche, les informations intrinsèques au carrefour (délimitation du carrefour et de ses branches) ne sont pas disponibles et doivent être calculées dans tous les cas. Nous avons développé des outils permettant d'obtenir ces informations à partir d'\gls{osm}.

\newpar{}

Nous avons déjà présenté les méthodes mobilisées pour délimiter un carrefour et ses branches dans la partie \ref{sec:modelisation_crseg}. Ces méthodes ont été implémentées en Python au sein d'un outil nommé \textbf{crseg} et publié sous la forme d'un logiciel libre\footnote{https://github.com/jmtrivial/crossroads-segmentation}, qui permet, à partir du graphe de données issu d'\gls{osm} de délimiter les carrefours et, pour chaque carrefour de le séparer en une cœur et des branches. Il présente plusieurs paramètres détaillés en partie \ref{sec:modelisation_crseg} et sur la forge logicielle de l'outil. Il permet, en sortie, d'obtenir pour chaque région du carrefour (cœur du carrefour, branches, bordures) les nœuds correspondants au format JSON (voir figure \ref{fig:experimentation_crseg_json}).

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.85\textwidth]{images/experimentation/donnees_crseg.pdf}
    \caption[Données produites par crseg]{Les données obtenues par crseg permettent d'identifier les nœuds appartenant à la branche. Source: Contributeurs OpenStreetMap.}
    \label{fig:experimentation_crseg_json}
\end{figure}

\newpar{}

Faisant suite à la délimitation du carrefour, nous présentions dans la partie \ref{sec:modelisation_calcul_info_pietonnes} les méthodes permettant à partir des branches d'obtenir sur le carrefour les trottoirs, les îlots, et les traversées de branches. Ces méthodes ont également été implémentées en Python au sein d'un outil nommé \textbf{crmodel} et publié sous la forme d'un logiciel libre\footnote{https://github.com/jeremyk6/crmodel}. crmodel prend en entrée le même graphe de données \gls{osm} utilisé par crseg, ainsi que le JSON de segmentation produit par crseg. Un exemple de résultat calculé par crmodel est présenté en figure \ref{fig:experimentation_crmodel_info_pietonne}.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.85\textwidth]{images/experimentation/donnees_crmodel.pdf}
    \caption[Données produites par crmodel]{Les informations piétonnes calculées à partir de crseg ne forment pas de nouvelle géométrie mais existent sous forme sémantique sur les tronçons originaux. Seules les traversées multiples forment de nouvelles géométries en étant composées des nœuds de passage piéton permettant de passer d'un trottoir à l'autre sur une branche. Source: Contributeurs OpenStreetMap.}
    \label{fig:experimentation_crmodel_info_pietonne}
\end{figure}

\newpar{}

crmodel comprend, au-delà de la création de ces nouvelles informations, une seconde étape: l'instanciation du modèle CrModel, présenté en partie \ref{sec:modelisation_crmodel}. Celui-ci est prévu pour représenter un carrefour et intégrer au sein d'un modèle objets tous les éléments nécessaires à sa description, facilitant la manipulation des données. En partant du modèle, l'outil permet d'exporter un format GeoJSON spécifique pouvant être intégré dans un SIG et définissant pour chaque entité le type d'objet concerné (tronçon de route, branche, passage piéton, traversée) et les attributs associés.

\newpar{}

L'outil crmodel en ligne de commande embarque crseg et permet de visualiser le résultat de la segmentation avec la commande \texttt{crmodel -c x y} (x et y correspondant à la position approximative du centre du carrefour). Celle-ci peut être ajustée à l'aide des paramètres $C0$ (\texttt{--c0}), $C1$ (\texttt{--c1}) et $C2$ (\texttt{--c2}) (voir partie \ref{sec:modelisation_crseg}) pour obtenir un résultat satisfaisant. On peut alors ajouter \texttt{-o carrefour.geojson} pour obtenir le fichier à intégrer à QGIS. Pour faciliter son utilisation par un utilisateur final, le géomaticien peut embarquer l'outil dans un traitement graphique exposant ses paramètres.

\subsubsection{Transformation des données}

Le format GeoJSON, pratique pour proposer un export rapide de l'intégralité des entités et attributs de CrModel, n'est pas rendu par QGIS d'une manière directement exploitable pour la génération de texte. Cependant, il contient l'intégralité des informations nécessaires à la génération du format de couches établies en partie \ref{sec:experimentation_forme_donnees}. On peut alors exploiter les outils intégrés à QGIS pour transformer l'export dans le format attendu. Cette étape de transformation peut être réalisée manuellement ou intégrée à une chaîne de traitements Processing, l'outil de scripting graphique intégré à QGIS, pour automatiser toute transformation similaire ultérieure et appliquer la transformation sur d'autres territoires. Un extrait de la chaîne de transformation et du résultat obtenu sont illustrés en figure \ref{fig:experimentation_chaine_donnees_qgis}.

\begin{figure}[ht]
    \centering
    \begin{subfigure}[t]{.49\linewidth}
        \centering
        \includegraphics[width=0.5\textwidth]{images/experimentation/pipeline_processing_crmodel.png}
        \caption{Automatiser les traitements permet d'exécuter la chaîne sur de nouveaux territoires.}
        \label{fig:experimentation_transformation_qgis}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{.49\linewidth}
        \centering
        \raisebox{4mm}{\includegraphics[width=\textwidth]{images/experimentation/resultat_processing_crmodel_br.png}}
        \caption{Les données transformées correspondent au format établi par l'utilisateur en partie \ref{sec:experimentation_forme_donnees}.}
        \label{fig:experimentation_transformation_resultat_qgis}
    \end{subfigure}
    \caption[Chaîne de traitement de données sous QGIS]{La chaîne de traitements de données sous QGIS permet de partir du GeoJSON fourni par crmodel pour obtenir un format exploitable pour la description.}
    \label{fig:experimentation_chaine_donnees_qgis}
\end{figure}

\subsubsection{Implémentation des patrons et de la description}

\label{sec:experimentation_implémentation_patron}

Les données adaptées à la description en notre possession, nous pouvons maintenant implémenter les patrons de description puis leur assemblage sous QGIS. Pour le permettre, nous avons implémenté une extension à QGIS nommé \textbf{QGIS2Desc} et publié sous la forme d’un logiciel libre\footnote{https://github.com/jeremyk6/QGIS2Desc}, qui s'intègre à Processing pour proposer deux nouveaux traitements.

\newpar{}

Le premier s'appelle <<~Concevoir une description~>> et va permettre l'implémentation d'un patron de description à partir d'une couche. Il prend en entrée une couche à décrire et offre à l'utilisateur un champ de texte permettant de définir le patron en Python. Plusieurs facilitations sont proposées, notamment en permettant l'accès simplifié aux attributs de la couche. Par ailleurs, pour répondre à la problématique des prépositions soulevées en partie \ref{sec:experimentation_preparation_patron}, il est possible d'utiliser le réalisateur de texte JSRealB \citep{molins2015} pour segmenter tout ou partie du texte en syntagmes et permettre la gestion des prépositions, des pluriels, des déterminants, des conjonctions, etc. Enfin, Il est possible d'ajouter au texte un ensemble de métadonnées qu permettrons de le sélectionner lors de l'étape d'assemblage. En sortie du traitement, la couche d'origine est complétée de deux champs supplémentaires au format JSON:

\begin{itemize}
    \item <<~description~>> contient le texte établi pour chaque ligne au format défini par JSRealB pour permettre sa réalisation ultérieure.
    \item <<~metadata~>> contient les métadonnées définie précédemment.
\end{itemize}

La figure \ref{fig:experimentation_qgis2desc_conception} est une capture d'écran qui montre l'usage du traitement pour obtenir la description générale du carrefour.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.7\textwidth]{images/experimentation/qgis2desc_conception.png}
    \caption[Fenêtre QGIS de conception de description]{Dans le patron, on remarque l'usage des fonctions \texttt{CP} et \texttt{C} qui vont permettre de réaliser la coordination entre les noms de branche. Pour deux branche, on obtiendra le texte <<~branche 1 et branche 2~>>. Pour trois branches et plus, on obtiendra le texte <<~branche 1, branche 2, branche 3, (...) et branche n~>>.}
    \label{fig:experimentation_qgis2desc_conception}
\end{figure}

\newpar{}

Le second s'appelle <<~Assembler des descriptions~>> et va permettre de générer le document final. Il prend en entrée plusieurs couches issues de <<~Concevoir une description~>>, un ensemble de métadonnées correspondantes à celles définies à l'étape précédente et qui va permettre de sélectionner les descriptions à prendre en compte, et un plan de description. Le plan de description correspond à un tableau ordonné dont le format est indiqué par le tableau \ref{experimentation:table_plan_description}. Chaque entrée du tableau est prise en compte de haut en bas et définit la couche décrite, le titre de la partie, et la forme que prendra le texte (actuellement un texte brut et une liste simple ou numérotée). La figure \ref{fig:experimentation_assemblage} présente un exemple d'assemblage de la description.

\begin{table}[ht]
    \begin{center}
    \footnotesize
    \begin{tabular}{ | l | l | l | }
        Couche & Titre & Forme\tabularnewline
        \hline
        general & Description générale & text\\
        branches & Description des branches & list\\
        crossings & Description des traversées & list
    \end{tabular}
    \end{center}
    \caption[Schéma tabulaire du plan de la description]{Le plan de la description défini précédemment serait le suivant dans le traitement établi.}
    \label{experimentation:table_plan_description}
\end{table}

\begin{figure}[ht]
    \centering
    \begin{subfigure}[t]{.49\linewidth}
        \centering
        \includegraphics[width=\textwidth]{images/experimentation/qgis2desc_assemblage.png}
        \caption{La fenêtre de <<~Assembler les descriptions~>> présente ses différents paramètres.}
        \label{fig:experimentation_assemblage_fenetre}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{.49\linewidth}
        \centering
        \includegraphics[width=\textwidth]{images/experimentation/qgis2desc_html.png}
        \caption{La sortie HTML obtenue respecte le formatage défini dans le plan.}
        \label{fig:experimentation_assemblage_html}
    \end{subfigure}
    \caption[Fenêtre QGIS de l'assemblage des descriptions]{Le traitement actuel permet d'obtenir en sortie un document HTML, mais son code est cependant extensible pour permettre la génération d'autres types de documents.}
    \label{fig:experimentation_assemblage}
\end{figure}

\newpar{}

À l'instar des traitements de données, il est possible d'intégrer les patrons et l'assemblage dans un traitement Processing pour permettre sa réutilisation sur de nouvelles données. Un modèle graphique Processing devient sous QGIS un traitement comme un autre avec des entrées, des sorties, et des paramètres. Il est ainsi possible d'exposer les paramètres de l'assemblage comme les métadonnées à sélectionner ou le plan de la description afin de permettre à un utilisateur final de moduler la description obtenue. La figure \ref{fig:experimentation_qgis2desc_modele_assemblage} illustre un exemple de modèle graphique permettant la description du carrefour. Les patrons permettant de décrire chaque partie sont présents en annexe \ref{annexe:patrons}.

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{images/experimentation/qgis2desc_modele_assemblage.png}
    \caption[Modèle graphique QGIS pour générer une description]{Le modèle graphique contient les patrons de plusieurs couches. On remarque également plusieurs patrons pour une même couche. Ceux-ci pourront être sélectionnés à l'aide des métadonnées lors de l'étape d'assemblage pour personnaliser la description.}
    \label{fig:experimentation_qgis2desc_modele_assemblage}
\end{figure}

\subsection{Utilisation des outils pour générer une description}

Les outils en place, l'utilisateur final (l'\gls{ia}) va pouvoir générer des descriptions sur plusieurs territoires. Pour cela il doit suivre les étapes suivantes:

\begin{enumerate}
    \item Utiliser crmodel pour obtenir les données intrinsèques du carrefour, les données piétonnes, et les attributs d'accessibilité. Comme évoqué précédemment, le géomaticien peut avoir préparé une boîte à outil pour l'utiliser de manière graphique.
    \item Exécuter le premier traitement préparé par le géomaticien pour transformer les données  de crmodel en couche prêtes pour la description (figure \ref{fig:experimentation_chaine_donnees_qgis}).
    \item Exécuter le second traitement pour obtenir la description finale. Il est possible de personnaliser le résultat en sélectionnant les patrons préparés, et en ajustant la présence et la forme des parties. 
\end{enumerate}

L'intégralité du processus réalisé par l'utilisateur final est illustré en figure \ref{fig:experimentation_processus_realisation_utilisateur}. Il pourrait par ailleurs être présenté à l'utilisateur sous la forme d'un unique traitement chaînant ces trois étapes et exposant leurs paramètres dans une interface unique. Des exemples de descriptions générées sur plusieurs carrefours sont présentés en annexe \ref{annexe:exemples}.

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{images/experimentation/pipeline_utilisateur.pdf}
    \caption[Étapes d'exécution de la chaîne de description par l'utilisateur]{L'exécution de la chaîne complète est simplifiée par les outils réalisés en amont par le géomaticien. Les complexités des traitements de données et de la réalisation du texte sont masquées derrière des boîtes à outils dont la prise en main est facilitée.}
    \label{fig:experimentation_processus_realisation_utilisateur}
\end{figure}

\subsection{Des interfaces pour accéder aux descriptions}

% CrWeb

En parallèle des outils implémentés sous QGIS, nous avons proposé une seconde interface dans un environnement web qui imlémente le plan de description esquissé en figure \ref{fig:experimentation_plan_description}. Les traitements sont réalisés intégralement côté serveur. Lors du clic sur un carrefour, la position est envoyé au serveur qui télécharge les données \gls{osm} autour du point, segmente le carrefour le plus proche avec crseg, exécute crmodel, et réalise la description en Python de la même manière que sous QGIS. Le serveur renvoie alors au client le GeoJSON du carrefour pour afficher le résultat de la segmentation, ainsi que la description. Il est également possible côté client de personnaliser les paramètres de crseg pour moduler la segmentation du carrefour. Une capture d'écran de l'outil est présentée en figure \ref{fig:experimentation_crweb}. Par ailleurs, l'outil est accessible en ligne\footnote{https://carrefour.anatidaepho.be} et son code source l'est également\footnote{https://github.com/jeremyk6/crweb}.

\newpar{}

% Le Pigeon Nelson

Le serveur permet également de renvoyer les données au format attendu par l'application <<~Le Pigeon Nelson~>>. Le Pigeon Nelson est une application libre pour smartphone\footnote{https://github.com/Le-Pigeon-Nelson/le-pigeon-nelson} à laquelle nous avons contribué qui permet de jouer un son relatif à la position de l'utilisateur et aux valeurs des capteurs du téléphone. Il fonctionne en mode client-serveur et la majorité de la logique se trouve côté serveur (se référer à la documentation pour plus de détails). Lors d'une requête vers le serveur CrWeb, l'application envoie sa position GPS. Le pipeline tel que décrit précédemment est alors exécuté sur la position envoyée avec les paramètres par défaut de crseg, et le serveur renvoie un fichier JSON adapté contenant le texte généré pour le carrefour le plus proche. Ce JSON est interprété par l'application, qui lit la description obtenue par synthèse vocale. Une capture de l'application en cours d'utilisation est présentée en figure \ref{fig:experimentation_pigeonnelson}.

\begin{figure}[ht]
    \centering
    \begin{subfigure}[t]{.49\linewidth}
        \centering
        \includegraphics[width=\textwidth]{images/experimentation/crweb.png}
        \caption{CrWeb permet d'afficher la segmentation du carrefour et le résultat de la description pour un patron figé.}
        \label{fig:experimentation_crweb}
    \end{subfigure}
    \hfill
    \begin{subfigure}[t]{.49\linewidth}
        \centering
        \includegraphics[width=0.4\textwidth]{images/experimentation/pigeonnelson.png}
        \caption{L'application lors de l'échange avec le serveur n'affiche aucune information. Ici, le son joué correspond au texte affiché par la figure de gauche.}
        \label{fig:experimentation_pigeonnelson}
    \end{subfigure}
    \caption[Interfaces simplifiées de génération de description]{Deux exemples d'interfaces permettant d'afficher ou d'écouter les descriptions générées à l'aide des outils présentés.}
    \label{fig:experimentation_crweb_pigeon}
\end{figure}

\section{Des descriptions textuelles intégrées à une carte tactile}

Le projet ACTIVmap, dans lequel s'inscrit cette thèse, est porté par trois acteurs: le \gls{limos}, l'\gls{ign} et l'\gls{irit}. La collaboration entre ces trois entités s'est cristallisée sous la forme de preuves de concepts dont l'objectif est de présenter une chaîne partant de la donnée pour réaliser une carte audiotactile. Dans cette partie, nous présentons deux preuves de concept réalisées dans ce cadre.

\subsection{Preuve de concept 1: réaliser une carte audiotactile}

\label{sec:experimentation_poc1}

\gls{deri} \citep{Brock2012} est une application développée au sein de l'\gls{irit}. Elle permet de transformer une tablette tactile en support tactile interactif. Son fonctionnement est le suivant: au sein de l'application est ouvert un fichier spécifique qui définit sur l'écran des interacteurs qui à l'appui déclenchent un son enregistré ou synthétisé. Plusieurs types d'appui sont pris en compte (simple appui, double appui), et il est possible sur un interacteur de déclencher des sons différents selon le type d'appui. Un document tactile correspondant au fichier et imprimé sur papier thermogonflé est posé sur l'écran et maintenu par la coque. L'épaisseur du papier permet aux interactions d'être détectée par l'écran tactile et de jouer les sons déclenchés par l'utilisateur lors de l'appui sur un interacteur. La figure \ref{fig:experimentation_exemple_deri} présente le dispositif.

\begin{figure}
    \centering
    \includegraphics[width=\textwidth]{images/experimentation/exemple_deri.pdf}
    \caption[Exemple de fichier DERi]{À gauche, contenu d'un fichier .deri et extrait du fichier XML d'interaction pour la légende de la carte de droite. On remarque que sont définis séparément les interacteurs (Poi) et les textes à jouer (Text), liés ensemble par une interaction (Trigger). À droite, une tablette \gls{deri} assemblée et en cours d'utilisation. Source: preuve de concept ACTIVmap.}
    \label{fig:experimentation_exemple_deri}
\end{figure}

\gls{deri} peut être utilisé pour réaliser toute sorte de documents audiotactiles, dont des cartes pour prendre connaissance d'un lieu. En revanche, ces réalisations à l'instar de celles des \gls{ia} sont aujourd'hui manuelles. L'objectif de cette expérimentation est de permettre la génération d'une carte audiotactile de carrefour sous la forme d'un fichier \gls{deri}. La chaîne permettant d'obtenir le document final combine les description que nous avons développées  et les cartes tactiles développées à l'\gls{ign} \citep{Jiang2023}.

\subsubsection{Assembler la carte et les descriptions}

Dans la partie \ref{sec:implementation_segmentation}, nous avons présenté un cadre et les outils permettant de proposer une description textuelle de toute donnée géographique. Par ailleurs, nous avons proposé des outils permettant à partir des données \gls{osm} d'obtenir des informations intrinsèques au carrefour comme la délimitation des branches. Tous ces outils peuvent être intégrés au \gls{sig} QGIS pour décrire textuellement un carrefour. Les travaux de \citet{Jiang2023} s'intéressent à la génération de cartes tactiles à l'échelle du carrefour, en partant également des données d'\gls{osm}. Les processus transforment les géométries et stylisent les données pour les adapter aux contraintes de lisibilité d'une carte tactile imprimée sur du papier thermogonflé. Ces processus s'intègrent également à QGIS.

\newpar{}

La réalisation d'une carte audiotactile à partir des travaux cités soulève les questions suivantes:

\begin{itemize}
    \item \textbf{Quels éléments décrire ?} \\
    Le choix des éléments à décrire dépendra de la taille et de l'usage de la carte (voir les exemples présentés en partie \ref{sec:experimentation_exemples_cartes_audiotactiles}). Les outils présentés en partie \ref{sec:implementation_segmentation}, en particulier les traitements intégrés à QGIS2Desc, permettent d'étendre les possibilités de description à des données non-intégrées à crmodel aujourd'hui. Outre l'accessibilité, il est alors possible de décrire d'autres points d'intérêts pouvant servir de repère tels que les commerces ou les arrêts de bus.
    \item \textbf{Où et comment placer les interacteurs pour maintenir la lisibilité de la carte ?} \\
    Les sons joués par \gls{deri} sont déclenchés par des interacteurs. Les interacteurs sont intégrés à une couche indépendante des données géographiques à décrire. Par exemple, l'interacteur permettant de décrire un passage piéton peut être placé à côté de celui-ci et non-pas sur le symbole représentant le passage piéton pour ne pas gêner sa lisibilité. Une grande densité d'interacteurs peut également poser des problèmes de lisibilité, et il est alors souhaitable de les fusionner. Le placement des interacteur est un problème qui n'a aujourd'hui pas encore été abordé et fait partie des perspectives évoquées par \citet{Jiang2023}. Leur placement est ici défini à la main.
    \item \textbf{Comment définir le texte d'un interacteur ?} \\
    En partant des mêmes données pour la carte et pour le texte, il existe un identifiant commun issu d'\gls{osm} pour chaque entité  permettant d'effectuer une correspondance automatique. Cependant, certaines descriptions n'ont pas d'accroche sous la forme d'un objet issu d'\gls{osm}. Il peut s'agir par exemple de la description générale du carrefour, ou des description de branches. L'identifiant permettant de faire la correspondance avec le texte doit alors être décidé en amont pour être commun aux deux données.
\end{itemize}

\newpar{}

Une illustration de la chaîne de traitement partant des données jusqu'au lien entre le texte généré et la carte tactile est présentée en figure \ref{fig:experimentation_lien_carte_texte}.

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{images/experimentation/pipeline_creation_deri1.pdf}
    \caption[Chaîne de traitement SIG pour générer un DERi]{Cette chaîne présente la méthode choisie pour définir le texte des interacteurs de la carte tactile en fonction des objets qu'ils représentent. Ce lien est fait en utilisant l'idenfiant \gls{osm} commun au texte et à la carte. Notre contribution à cette chaîne est représentée par les traitements situés sur la ligne centrale.}
    \label{fig:experimentation_lien_carte_texte}
\end{figure}

\subsubsection{Générer un fichier \gls{deri}}

\label{sec:experimentation_generer_deri}

À partir du fichier du fichier des interacteurs décrits et de la carte, il est possible de générer un fichier \gls{deri}, mais une transformation de la forme et des coordonnées doit être effectuée. Un fichier \gls{deri} correspond à un fichier zip contenant la carte dans un format image pour un affichage à l'écran (pour tester les interactions) et un fichier XML définissant les interactions. Ce dernier est séparé en trois parties principales: définition de la position et de la forme des interacteurs, définition des ressources (textes à lire ou fichiers audio), et définition pour chaque interacteur de la ressource jouée pour une interaction donnée (simple appui, double appui, etc.) (voir figure \ref{fig:experimentation_exemple_deri}). 

\newpar{}

\gls{deri} étant un système permettant la réalisation de tout document tactile, donc pas spécialement des cartes, la position et la forme des interacteurs est exprimée en pourcentage de taille d'écran, avec une origine en haut à gauche. Pour calculer la position dans ce format ($x_{deri}$ et $y_{deri}$) de chaque interacteur, il est donc nécessaire de connaître la position de chaque interacteur ($x$ et $y$) et l'étendue de la carte ($x_{min}$, $x_{max}$, $y_{min}$ et $y_{max}$):

\newpar{}

$x_{deri} = \frac{x - x_{min}}{x_{max} - x_{min}}$

$y_{deri} = \frac{y - y_{min}}{y_{max} - y_{min}}$

\newpar{}

Le processus de transformation, à l'instar des précédents, peut être automatisé dans un \gls{sig} comme QGIS pour obtenir le document final.

\subsubsection{Exemples de cartes audiotactiles générées}

\label{sec:experimentation_exemples_cartes_audiotactiles}

Les méthodes présentées dans cette partie ont été appliquées à la génération de cartes audiotactiles de différentes tailles et répondant à différents usages. La figure \ref{fig:experimentation_exemples_cartes_audiotactiles} présente quelques exemples de résultats.

\begin{figure}[ht]
    \centering
    \begin{subfigure}[t]{.49\linewidth}
        \centering
        \includegraphics[width=\textwidth]{images/experimentation/poc1_a4.png}
    \end{subfigure}
    \begin{subfigure}[t]{.49\linewidth}
        \centering
        \includegraphics[width=\textwidth]{images/experimentation/poc1_a5.png}
    \end{subfigure}
    \caption[Exemples de cartes audiotactiles]{Deux cartes audiotactiles réalisées par Markie Jiang \citep{jiang:tel-04500971} dans le cadre du projet. La différence de taille entre les deux carte (A4 à gauche, A5 à droite) s'explique par la différence d'usage. La première est pensée pour être utilisée chez soi ou en séance de locomotion. La seconde est plutôt prévue pour un usage sur site. Les interacteurs (ronds blancs) permettent de déclencher des sons générés par nos travaux.}
    \label{fig:experimentation_exemples_cartes_audiotactiles}
\end{figure}

\subsection{Preuve de concept 2: interactions à partir de données graphe}

\label{sec:experimentation_poc2}

% Inspiré des interactions avec un téléphone

Dans l'expérimentation précédente, nous avons proposé les méthodes permettant de générer une carte audiotactile pour \gls{deri} à partir d'une carte et de données géographiques décrites. Dans sa version actuelle, \gls{deri} permet de définir un son par interaction et par interacteur. Cela correspond bien à un usage exploratoire de la carte, mais cela limite la quantité d'information que l'on peut faire figurer. Par exemple, en fonction de l'échelle de la carte il n'est pas possible de faire figurer tous les services (commerces, banques, bureaux de postes, etc) d'une branche pour des contraintes de lisibilité, la densité des interacteurs nécessaires pouvant être trop importante ou le texte trop long si présent sur un seul interacteur. Par ailleurs, il pourrait être souhaitable de décrire la branche au-delà de ce que la carte affiche. Pour répondre à cette problématique dont l'objectif est de réfléchir à de nouveaux usages, l'\gls{irit} propose de faire figurer des informations multiples sur un seul interacteur sous la forme d'un graphe de texte navigable par glissement du doigt, à l'instar de la navigation actuellement implémentée sur les smartphones. Nous avons proposé ensemble une nouvelle version du format de fichier \gls{deri} permettant d'implémenter un graphe de texte au sein d'un unique interacteur. Le fonctionnement de ce nouveau format et son application possible à la navigation virtuelle au sein d'une branche sont détaillées dans cette partie.

\subsubsection{\gls{deri} 2: un nouveau format pour naviguer dans un graphe de textes}

À l'instar de la première version, un fichier \gls{deri} 2 est également un fichier zip contenant une image du document et un fichier d'interaction. Ce dernier est maintenant au format JSON et comprend les mêmes sections que précédemment. La différence majeure se situe dans la capacité des ressources à être liées à d'autres ressources en fonction d'une nouvelle interaction. En déclenchant depuis un interacteur une ressource donnée, un curseur virtuel est placé sur cette ressource. Une nouvelle interaction réalisée sur le même interacteur pourra déplacer ce curseur vers une nouvelle ressource. Les ressources forment ainsi un graphe au sein duquel il est possible de naviguer par interaction. Outre les appuis, les glisser dans les quatre directions ont été introduits pour permettre la navigation dans le graphe. La figure \ref{fig:experimentation_deri2_exemple} illustre le fonctionnement de ce nouveau format.

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{images/experimentation/exemple_deri2.pdf}
    \caption[Exemple de fichier DERi 2]{Le fichier JSON d’interaction décrit un graphe de texte navigable par interaction. La carte de droite illustre le passage d'un texte à un autre selon l'interaction réalisée. Source: Contributeurs OpenStreetMap.}
    \label{fig:experimentation_deri2_exemple}
\end{figure}

Cette nouvelle représentation sous forme de graphe permet de spatialiser les descriptions, avec une notion d'avant et d'après. Dans cette expérimentation, nous avons choisi d'appliquer ce nouveau format  à la description interactive d'une branche, et en particulier de ses commerces et services. L'objectif est ici de pouvoir naviguer depuis le début de la branche de commerce en commerce, et d'entrer virtuellement à l'interieur de ceux-ci pour obtenir des informations supplémentaires sur chacun d'eux. 

\subsubsection{Traitement des données pour la génération du graphe}

À l'instar de la première preuve de concept, les données mobilisées seront issues de crmodel pour les informations du carrefour, complétées d'\gls{osm} pour les commerces. Pour réaliser ces textes, il est nécessaire de concevoir un graphe par branche. Ce graphe sera réalisé de la manière suivante:

\begin{itemize}
    \item Pour chaque branche, on estime quels commerces se situent sur son trottoir de droite et sur son trottoir de gauche.
    \item Un graphe de proximité des commerces par trottoir est réalisé. Chaque nœud permettra d'indiquer le nom et l'adresse du commerce.
    \item Un nœud supplémentaire est ajouté par commerce. Il est relié au nœud du commerce concerné et permet d'indiquer des informations supplémentaires telles que les horaires d'ouverture et les services proposés.
    \item Aux graphe de proximité des commerces sont insérés les nœuds des passages piétons présents sur la branches. Leurs deux extrémités permettent de naviguer d'un trottoir à l'autre.
\end{itemize}

\newpar{}

La construction de ce graphe peut être automatisée sous QGIS et présentée à l'utilisateur sous la forme d'une boîte de traitement. Un exemple de graphe pour une branche est présenté en figure \ref{fig:experimentation_deri2_graphe_branche}.

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{images/experimentation/exemple_graphe_poc2.pdf}
    \caption[Exemple de graphe de description de branche]{Exemple de graphe généré pour une branche. Seules la topologie et la sémantique comptent pour la navigation, la géométrie présentée dans cette exemple est factice pour être lisible. Source: Contributeurs OpenStreetMap.}
    \label{fig:experimentation_deri2_graphe_branche}
\end{figure}

L'implémentation des patrons textuels est ensuite réalisée avec QGIS2Desc pour chaque type de nœud du graphe (commerce, passage piéton, etc).

\subsubsection{Construction du fichier \gls{deri} 2}

La construction du fichier \gls{deri} 2 est similaire au processus présenté en partie \ref{sec:experimentation_generer_deri}. En entrée du processus de création, on retrouve la carte et le fichier d'interacteurs, cette fois-ci complétés des couches représentant les graphes de chaque branche tels que décrits précédemment. Les interacteurs sont toujours placés manuellement et chacun référence un graphe, ce dernier contenant le texte.

\newpar{}

Les interactions sont définies de la manière suivante: lors d'un double appui sur l'interacteur, la première ressource appelée correspond au premier nœud du trottoir gauche de la branche. Un glissement vers le haut ou le bas permet de naviguer de commerces en commerces le long de la branche. Sur le trottoir gauche, lors d'un glissement vers la gauche, on accède au nœud supplémentaire du commerce, et inversement pour le trottoir de droite. De la même manière, sur le trottoir de gauche, en étant positionné sur un nœud de passage piéton, un glissement vers la droite permet de changer de trottoir, et inversement pour le trottoir de droite.

\subsubsection{Exemple de carte audiotactile générée}

Les méthodes détaillées ci-dessus n'ont pas été automatisée mais appliquée manuellement pour réaliser une branche sur le carrefour du Pont des Demoiselles de Toulouse présenté en partie \ref{sec:experimentation_exemples_cartes_audiotactiles}. Ce dernier a été choisi car plusieurs cartes tactiles avaient déjà été réalisées pour ce carrefour. La figure \ref{fig:experimentation_deri2_exemple_carte} illustre le graphe obtenu pour la branche visée et une partie du texte associé. 

\begin{figure}[ht]
    \centering
    \includegraphics[width=\textwidth]{images/experimentation/exemple_poc2.pdf}
    \caption[Carte tactile A5 et graphe de description de branche]{La carte tactile en version A5 limitant la représentation des branches, le graphe permet de naviguer au-delà pour prendre connaissance des commerces qu'elle peut contenir.}
    \label{fig:experimentation_deri2_exemple_carte}
\end{figure}

\section{Le carrefour dont vous êtes le héros: naviguer dans une description égocentrée}

\label{sec:experimentation_le_carrefour_dont_vous_etes_le_heros}

La navigation dans un graphe de texte a été explorée dans la partie précédente en mobilisant les nouvelles fonctions permises par \gls{deri} 2. Cette dernière repose d'une part sur les interactions avec une carte, et d'autre part sur un texte forcément exocentré où chaque nœud contient un texte indépendant du contexte. Dans cette partie, en se détachant du medium tactile, nous proposons une expérimentation permettant de naviguer dans un graphe de texte sous la forme d'une description égocentrée. L'objectif est de permettre à l'utilisateur de naviguer dans une description textuelle d'un carrefour en se déplaçant virtuellement à l'intérieur de celui-ci. 

\subsection{Texte souhaité et forme des données}

La particularité de la description égocentrée au regard des précédentes concerne la forme du texte, qui sera présenté de manière orientée et à la première personne. Il peut s'agir par exemple de la description du déplacement à effectuer pour se rendre sur un passage piéton: <<~Tourner légèrement à gauche pour trouver le prochain passage piéton~>>. La réalisation d'une description de ce type implique de disposer d'un graphe de données et d'une information textuelle adaptée. Un exemple de graphe et de textes souhaités pour décrire une partie d'un cheminement est présenté en figure \ref{fig:experimentation_description_egocentree}.

\begin{figure}[ht]
    \begin{minipage}[b]{0.45\linewidth}
        \centering
        \includegraphics[width=0.8\linewidth]{images/experimentation/ortho_carrefour_ego.pdf} 
    \end{minipage}
    \begin{minipage}[b]{0.45\linewidth}
        \footnotesize
        Le prochain passage piéton se trouve légèrement à gauche.\\\\\\\\
    \end{minipage}
    \caption[Exemple de description égocentrée]{Exemple de descriptions égocentrées passant sur le même passage piéton. On remarque que la description est contextualisée par rapport à l'endroit d'où l'utilisateur provient. Un élément n'est ainsi pas toujours décrit par le même texte. Source: IGN BD Ortho 2020.}
    \label{fig:experimentation_description_egocentree}
\end{figure}

Une problématique de la description égocentrée concerne les angles et les distances. Les \gls{pcdv} ont une capacité de discrimination angulaire et d’estimation des distances très dépendante des conditions de l’environnement \citep{ratelle_manuel_2019}. Sur ces aspects, nous pouvons choisir de laisser l'indication floue pour ne pas induire en erreur l'utilisateur, par exemple en indicant <<~Tourner légèrement à gauche~>> plutôt que <<~Tourner à 45 degrés à gauche~>>. Par ailleurs, les données mobilisées seront de toutes façons trop imprécises pour permettre un haut niveau de détail dans les descriptions métriques.

\newpar{}

La manière de naviguer textuellement dans le carrefour que nous proposons est inspirée des livres-jeux tels que les <<~Livres dont vous êtes le héros~>>, où le lecteur est amené à faire des choix pour avancer dans l'histoire, les chapitres constituant un graphe de texte. Dans notre cas, une subtilité provient de la nécessité de conserver l'information de la provenance, pour indiquer notamment l'orientation et fournir des informations telles que <<~Continuez tout droit~>> ou <<~Tournez à gauche~>>. Les liens entre les nœuds seront ainsi modélisés de la manière suivante: pour chaque nœud $n$ du graphe, on a une liste qui associe à chaque nœud voisin $n_{source}$ une liste qui associe à chaque nœud voisin $n_{cible}$ une question et un texte correspondant si celle-ci est sélectionnée. Pour le graphe en figure \ref{fig:experimentation_description_egocentree}, on obtiendrait en étant positionné sur le nœud $n2$:

\begin{itemize}
    \item Depuis $n1$
        \begin{itemize}
            \item Vers $n1$
                \begin{itemize}
                    \item Question: <<~Faire demi-tour~>>
                    \item Texte: <<~Faites demi-tour et continuez sur le trottoir gauche de la branche 2~>>
                \end{itemize}
            \item Vers $n3$
                \begin{itemize}
                    \item Question: << Aller en direction du trottoir opposé. >>
                    \item Texte: <<~Tournez à gauche pour accéder au passage piéton. Vous pouvez le repérer à l'aide de la bande d'éveil de vigilance.~>>
                \end{itemize}
            \item Vers $n4$
                \begin{itemize}
                    \item \dots
                \end{itemize}
        \end{itemize}
    \item Depuis $n3$
        \begin{itemize}
            \item \dots
        \end{itemize}
\end{itemize}

Cette information peut être matérialisée sous la forme d'un tableau de donnée dont un extrait est proposé en table \ref{tab:experimentation_desc_egocentree}.

\begin{table}[ht]
    \begin{center}
        \footnotesize
        \begin{tabular}{ | l | l | l | p{3.1cm} | p{6.2cm} | }
            \textbf{Nœud courant} & \textbf{Depuis} & \textbf{Vers} & \textbf{Question} & \textbf{Texte}\\
            \hline
            2 & 1 & 1 & << Faire demi-tour >> & << Faites demi-tour et continuez sur le trottoir gauche de la branche 2 >> \\
            2 & 1 & 3 & << Aller en direction du trottoir opposé. >> & << Tournez à gauche pour accéder au passage piéton. Vous pouvez le repérer à l'aide de la bande d'éveil de vigilance. >>
        \end{tabular}
    \end{center}
    \caption[Schéma tabulaire pour la génération d'une description égocentrée]{Pour matérialiser les listes imbriquées précédentes, une ligne correspond pour un nœud à une source et une destination. Ainsi, si un nœud a trois voisins, il sera représenté par trois lignes par voisin, soit neuf lignes.}
    \label{tab:experimentation_desc_egocentree}
\end{table}

\subsection{Obtention du graphe et génération des informations textuelles}

Un graphe piéton d'une telle précision, contenant les trottoirs et les passages piéton sous forme linéaire, n'est pas disponible sur tous les territoires. Sur \gls{osm}, en France, peu de villes en disposent mais l'on peut citer notamment Paris ou Orange. Ce sont ces données qui seront mobilisables pour l'expérimentation. 

\newpar{}

L'obtention du graphe est ainsi très directe depuis OpenStreetMap. Il est simplifié pour ne conserver qu'une arête entre les points d'intérêts à considérer. crmodel ne délimitant le carrefour que sur le réseau routier, il est possible de l'utiliser pour découper à chaque branche le trottoir sur l'arête adjacente, ou délimiter le carrefour manuellement. Cette seconde solution est ici choisie, notamment pour créer manuellement les nœuds correspondants à la direction à l'extrémité de chaque trottoir.

\newpar{}

Pour chaque nœud du graphe, les nœuds voisins sont repérés pour reconstituer la table \ref{tab:experimentation_desc_egocentree}. Enfin, les textes correspondants aux questions et aux textes peuvent être générés à l'aide de QGIS2Desc en mobilisant les informations contenues dans les points d'intérêt et dans les arêtes les reliants. Pour indiquer dans le texte la direction correspondante, l'algorithme suivant peut être appliqué: pour chaque nœud de direction, on regarde si le chemin le plus court de notre position vers celui-ci implique de passer par le nœud de destination. Si oui, on indique que le cheminement pointe dans cette direction. De cette manière, un cheminement peut mener à plusieurs directions. Cet algorithme peut être empaqueté dans une fonction pour faciliter son usage lors de la conception du patron.

\subsection{Implémentation au sein d'une application web}

Sur la base des données préparées en partie précédente, il serait possible de générer un fichier ad hoc utilisable avec un interpréteur pour naviguer dans le carrefour à la manière d'une fiction HTML. En réalité, l'implémentation de cette expérimentation précède le modèle présenté en partie \ref{sec:implementation_segmentation}. Ici, la description est générée automatiquement à partir d'un graphe dessiné à la main sur QGIS et contenant les informations souhaitées. Ce graphe est ensuite exporté dans un format XML propre à l'implémentation et interprété par une application web. Quatre carrefours ont été réalisés de cette manière et sont accessibles en ligne\footnote{https://carrefours.activmap.limos.fr}. Le code source également disponible sous licence libre\footnote{https://gitlab.limos.fr/jeremyk6/carrefourV2}. Une capture de l'application réalisée est proposée en figure \ref{fig:experimentation_egocentre_screen}.

\begin{figure}[ht]
    \centering
    \includegraphics[width=0.8\textwidth]{images/experimentation/carrefour_heros.png}
    \caption[Démonstrateur de navigation virtuelle dans un carrefour]{L'application web permet de naviguer dans un carrefour à la manière d'un livre dont vous êtes le héros.}
    \label{fig:experimentation_egocentre_screen}
\end{figure}

\newpar{}

Cette implémentation illustre cependant la faisabilité de la proposition. Les données ici modélisées à la main pourraient être générée depuis \gls{osm} en se reposant sur QGIS, à la manière de ce que nous avons présenté dans les parties précédentes.

\section{Conclusion du chapitre}

Dans ce chapitre, nous avons présenté différentes expérimentations réalisées dans le cadre de cette thèse, couvrant la réalisation de description de types et de supports variés.

\newpar{}

Nous avons présenté les implémentations des méthodes présentées aux chapitres \ref{chap:modelisation} et \ref{chap:description} sous la forme d'outils mobilisables dans un \gls{sig} comme QGIS. Nous avons esquissé, en mobilisant ces méthodes et outils, la faisabilité de la génération de descriptions exocentrées indépendantes ou intégrées à une carte audiotactiles dans le cadre de travaux communs avec les autres membres du projet ACTIVmap. Nous avons également proposé une nouvelle manière de naviguer dans une description textuelle de carrefour sous la forme d'une description égocentrée.

\newpar{}

Les textes, méthodes, et outils présentés dans ce chapitre doivent être évaluées pour en mesurer la qualité et l'efficacité. Il s'agit de l'objet du chapitre suivant.